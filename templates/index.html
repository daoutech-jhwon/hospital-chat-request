<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏥 병원 간호사 도우미 챗봇</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="chat-container">
        <!-- 헤더 영역 -->
        <header class="chat-header">
            <div class="header-content">
                <h1>🏥 병원 간호사 도우미</h1>
                <p>업무 관련 문의사항을 입력해주세요</p>
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span class="status-text">온라인</span>
                </div>
            </div>
        </header>
        
        <!-- 메시지 영역 -->
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="message-avatar">🤖</div>
                <div class="message-content">
                    <div class="message-text">
                        안녕하세요! 병원 간호사 도우미입니다. 무엇을 도와드릴까요?
                    </div>
                    <div class="message-time" id="welcomeTime"></div>
                </div>
            </div>
        </div>
        
        <!-- 빠른 버튼 영역 -->
        <div class="quick-buttons" id="quickButtons">
            <button class="quick-btn" onclick="sendQuickMessage('수리 물품 문의')">
                🔧 수리물품
            </button>
            <button class="quick-btn" onclick="sendQuickMessage('의약품 문의')">
                💊 의약품
            </button>
            <button class="quick-btn" onclick="sendQuickMessage('재무 문의')">
                💰 재무총무
            </button>
            <button class="quick-btn" onclick="sendQuickMessage('업무 일정')">
                📋 업무지휘
            </button>
            <button class="quick-btn" onclick="sendQuickMessage('ICU 현황')">
                🏥 ICU
            </button>
            <button class="quick-btn" onclick="sendQuickMessage('연락처 전체')">
                📞 연락처
            </button>
        </div>
        
        <!-- 입력 영역 -->
        <div class="chat-input">
            <div class="input-container">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="메시지를 입력하세요..." 
                    maxlength="200"
                    autocomplete="off"
                >
                <button id="sendButton" onclick="sendMessage()">
                    <span class="send-icon">📤</span>
                    <span class="send-text">전송</span>
                </button>
            </div>
            <div class="input-footer">
                <span class="char-count">
                    <span id="charCount">0</span>/200
                </span>
                <button class="help-btn" onclick="getHelp()">
                    ❓ 도움말
                </button>
            </div>
        </div>
    </div>
    
    <!-- 로딩 오버레이 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>응답을 기다리는 중...</p>
        </div>
    </div>
    
    <!-- 에러 모달 -->
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⚠️ 오류 발생</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="errorMessage">오류가 발생했습니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal()">확인</button>
            </div>
        </div>
    </div>
    
    <!-- 도움말 모달 -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>📚 사용법 안내</h3>
                <button class="modal-close" onclick="closeHelpModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <h4>🏥 주요 기능</h4>
                    <ul>
                        <li><strong>수리물품:</strong> 장비 수리, 고장 문의</li>
                        <li><strong>의약품:</strong> 처방, 투약 관련 문의</li>
                        <li><strong>재무총무:</strong> 예산, 구매, 계약 문의</li>
                        <li><strong>업무지휘:</strong> 일정, 회의, 보고 관련</li>
                        <li><strong>ICU:</strong> 중환자실 관련 문의</li>
                        <li><strong>전송백업:</strong> 파일, 데이터 관련</li>
                    </ul>
                    
                    <h4>💬 사용 예시</h4>
                    <ul>
                        <li>"장비가 고장났어요"</li>
                        <li>"약물 투약 시간 알려주세요"</li>
                        <li>"회의 일정 확인해주세요"</li>
                        <li>"연락처 알려주세요"</li>
                    </ul>
                    
                    <h4>🆘 응급상황</h4>
                    <p>"응급", "화재", "코드블루" 등의 키워드를 사용하면 우선 처리됩니다.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeHelpModal()">확인</button>
            </div>
        </div>
    </div>
    
    <script src="/static/script.js"></script>
    <script>
        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 환영 메시지 시간 설정
            document.getElementById('welcomeTime').textContent = getCurrentTime();
            
            // 입력 필드에 포커스
            document.getElementById('messageInput').focus();
            
            // 문자 수 카운터 초기화
            updateCharCount();
            
            console.log('🏥 병원 간호사 도우미 챗봇이 준비되었습니다!');
        });
    </script>
</body>
</html>
